version: "1.0"
buildspecs:
  likwid_pin_cores:
    type: compiler
    executor: slurm.debug
    description: Run code using likwid-perfctr and acquire performance counter for MEM group  
    tags: [tools]
    batch:
      nodecount: "1"
      timelimit: "5"
    sbatch: ["-C knl,quad,cache", "--perf=likwid" ]
    module:
      - module load PrgEnv-intel
      - module load likwid
    env:
      OMP_NUM_THREADS: 4
    build:
      name: cray
      source: xthi.c
      cflags: -qopenmp
    run:
      launcher: srun -n 1 likwid-perfctr -C 0,8,16,24 -g MEM
maintainers:
  - "Shahzeb Siddiqui <@shahzebsiddiqui>"
